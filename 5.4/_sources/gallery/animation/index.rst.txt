制作动画
========

GMT自身只能生成静态图片，并不具备制作动画的功能。但动画的本质就是将一系列
静态的图片（每张静态图片称为动画的一帧）按照顺序快速切换。
因而可以利用GMT绘制多张静态图片，再利用外部工具将这些静态图片转换成单个动画文件。

使用GMT制作动画时，通常需要考虑如下问题：

#. 一张动画需要多少帧？帧数太少会导致动画存在不连续感，帧数太多可能导致绘制/播放很长时间、
   文件过大。因而通常将相关参数定义为变量，方便根据实际情况进行微调
#. 不变的元素有哪些？通常一张动图中有些元素是不变的，比如底图、海岸线、图例等等。
   如果在每一帧静态图片中都重复绘制这些元素，则会浪费大量时间。
   在绘制静态图片时，可以将这些不变的元素先绘制完，然后将未关闭的PS文件复制到
   新文件中，并在新文件中绘制余下的部分
#. 确定文件名。由于要生成一系列静态图片，且将静态图片转换为动图时图片需要按照
   固定顺序排列，因而必须使得每张静态图片的文件名唯一且依次递增。
   通常的做法是设定一个帧计数器，其值初始化为0，并随着循环不断递增。
   文件名则由文件名前缀和帧计数器共同决定，例如 ``plot_0001.ps``\ 。
   需要注意，文件名中 ``0001`` 的前置 0 不可省略，否则在转换成动图时各帧之间的
   先后顺序会出错
#. 每一帧生成的PS文件均需要使用 :doc:`/module/psconvert` 将其转换为PNG等格式
#. ImageMagick的 ``convert`` 命令可以将图片转换成gif或者avi等格式

绘制正弦函数动画
----------------

.. literalinclude:: anim01/anim01.sh

.. only:: html

    .. figure:: anim01/anim01.gif
       :align: center
       :width: 60%

.. only:: latex

    .. figure:: anim01/anim01.png
       :align: center
       :width: 60%
