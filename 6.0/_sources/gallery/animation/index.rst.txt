制作动画
========

GMT提供了 :doc:`gmt:movie` 模块用于简化制作动图的流程。

动画本质上将一系列静态的图片（每张静态图片称为动画的一帧）按照顺序快速切换。
:doc:`gmt:movie` 模块的作用就是生成一系列静态图片，并利用外部工具将所有
图片合并转换成单个动图。

一张动图中有很多不变的元素，比如底图、海岸线、图例等。通常来说，一张动图可以
分为三个图层：

#. 静态的背景图层（可选）
#. 动态元素图层（必须）
#. 静态的前景图层（可选）

用户需要准备一至三个GMT脚本，分别用于绘制三个图层。其中，绘制动态元素图层
所需的脚本中可以使用一系列GMT预定义的变量。

GMT生成动画的基本流程是：

#. 调用第一个脚本生成静态背景图层
#. 调用第三个脚本生成静态前景图层
#. 调用第二个脚本生成中间的动态元素所在的图层
#. 将静态背景图层、中间动态图层和静态前景图层按照顺序叠在一起，得到一帧静态图片
#. 循环执行第3和第4步，得到动图所需的所有帧静态图片
#. 调用外部工具将所有静态图片合并转换为动图图片

绘制正弦函数动画
----------------

.. literalinclude:: anim01/anim01.sh

.. only:: html

    .. figure:: anim01/anim01.gif
       :align: center
       :width: 60%

.. only:: latex

    .. figure:: anim01/anim01.png
       :align: center
       :width: 60%

绘制旋转的地球
--------------

本例中绘制了一个旋转的地球动画，图上展示了地壳的的年龄。

.. literalinclude:: anim02/anim02.sh

.. only:: html

    .. figure:: anim02/anim02.gif
       :align: center
       :width: 60%

.. only:: latex

    .. figure:: anim02/anim02.png
       :align: center
       :width: 60%
