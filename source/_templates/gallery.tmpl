{# Template for the gallery page #}

{% for group in data %}
{{ group["title"] }}
==========================

.. grid:: 2 3 3 4
    :gutter: 1

    {% for fig in group["gallery"] %}
    {% if fig["script"] is defined %}
        {% set md5value = (config.html_context["basedir"] + fig["script"]) | filemd5 %}
        {% set image = config.html_context["siteurl"] + "/_images/" + md5value + ".png" %}
        
        {#  ref 改为 url，并加 # #}
        {% set link, link_type = "#gmtplot-" + md5value, "url" %}
        
    {% else %}
        {% if fig["image"].startswith("http") %}
            {% set image = fig["image"] %}
            {% if fig["target"].startswith("http") %}
                {% set link, link_type = fig["target"], "url" %}
            {% else %}
                {% set link, link_type = "/" + fig["target"], "doc" %}
            {% endif %}
        {% else %}
            {% set image = config.html_context["siteurl"] + "/_images/" + fig["image"] + ".png" %}
            
            {# ref 改为 url，并加 # #}
            {% set link, link_type = "#gmtplot-" + fig["image"], "url" %}
            
        {% endif %}
    {% endif %}
    .. grid-item-card::
        :margin: 0 2 0 0
        :text-align: center
        :link: {{ link }}
        :link-type: {{ link_type }}

        .. raw:: html

           {# 增加 id 容器 #}
           <div id="{{ link | replace('#', '') }}">
               <img src="{{ image }}" alt="{{ fig['title'] }}" class="figure-img" style="width: 100%; object-fit: contain;">
           </div>

        +++
        **{{ fig["title"] }}**
    {% endfor %}
{% endfor %}
