{% extends "!page.html" %}

{% macro render_user_list(users, icon) %}
  {{ icon }}
  {%- for user in users if user.strip() %}
    <a href="{{ contributors.get(user.strip(), '#') }}" target="_blank" rel="noopener">{{ user.strip() }}</a>{{ ", " if not loop.last }}
  {%- endfor %}
{% endmacro %}

{% block body %}
  {% if meta.author or meta.reviewer or meta.created_date or meta.updated_date %}
    <div class="page-meta" style="font-size: 0.85em; color: #666; margin-bottom: 1em; padding-bottom: 0.5em; border-bottom: 1px solid #ddd;">
      {% set parts = [] %}
      {% if meta.author %}
        {% set authors = meta.author if meta.author is sequence else meta.author.split(",") %}
        {% set _ = parts.append(render_user_list(authors, "✍️")) %}
      {% endif %}
      {% if meta.reviewer %}
        {% set reviewers = meta.reviewer if meta.reviewer is sequence else meta.reviewer.split(",") %}
        {% set _ = parts.append(render_user_list(reviewers, "🧐")) %}
      {% endif %}
      {% if meta.created_date %}
        {% set _ = parts.append("📅 " ~ meta.created_date) %}
      {% endif %}
      {% if meta.updated_date %}
        {% set _ = parts.append("⚡ " ~ meta.updated_date) %}
      {% endif %}
      {{ parts | join(" &nbsp;•&nbsp; ") }}
    </div>
  {% endif %}
  {{ super() }}
{% endblock %}
